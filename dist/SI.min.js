var SI={};
SI.Animation=new function(){var a=this;a.REPEAT_ALWAYS=0;var d=null,b=[];a["class"]=function(e,f,c,n,p,m){var g=this,q=null,h=0,l=0;g.getSpriteSheet=function(){return e};g.getX=function(){return f};g.getY=function(){return c};g.getSpriteIndex=function(){return n};g.getSpriteUpdateMaxDelta=function(){return p};g.getRepeat=function(){return m};g.getSpriteInfo=function(){return q};g.getLap=function(){return h};g.getSpriteUpdateDelta=function(){return l};g.renderLogic=function(){l++;if(l>=p){l=0;var b=
n+1;b>=q.totalFrames?(n=0,m!=a.REPEAT_ALWAYS&&(h++,h>=m&&g.finish())):n=b}};g.renderGraphics=function(){d.drawImage(e,q.framesCoords[n],0,q.size,q.size,f,c,q.size,q.size)};g.finish=function(){SI.safeObjectArrayLoop(b,function(a,l){return l==g?(b.splice(a,1),!1):!0})};q=a.getSpriteInfo(e)};a.getContext=function(){return d};a.getInstances=function(){return b};a.setContext=function(a){d=a};a.init=function(b){a.setContext(b)};a.resetState=function(){b=[]};a.setControlsListeners=function(){};a.unsetControlsListeners=
function(){};a.create=function(e,f,c,d,p,m){e=new a["class"](e,f,c,d,p,m);b.push(e);return e};a.renderLogic=function(){SI.safeObjectArrayLoop(b,function(a,b){b.renderLogic();return!0})};a.renderGraphics=function(){SI.safeObjectArrayLoop(b,function(a,b){b.renderGraphics();return!0})};a.getSpriteInfo=function(a,b){"undefined"==typeof b&&(b=!1);var c={},d=0,p;c.size=a.height;c.totalFrames=a.width/a.height;c.framesCoords=new Uint16Array(c.totalFrames);c.spritesImagesDatas=[];var m=document.createElement("canvas");
m.width=c.size;m.height=c.size;var g=m.getContext("2d");for(p=0;p<a.width;p+=c.size)c.framesCoords[d]=p,b&&(g.drawImage(a,p,0,c.size,c.size,0,0,c.size,c.size),c.spritesImagesDatas.push(g.getImageData(0,0,m.width,m.height))),d++;return c}};SI.checkObjectHit=function(a,d,b,e,f,c){return a>=b&&a<=b+f&&d>=e&&d<=e+f&&0!=c.data[4*(f*Math.floor(d-e)+Math.floor(a-b))+3]?!0:!1};
SI.Controls=new function(){var a=!1,d=!1,b=0,e=0,f={},c={},n=null,p=null,m=null,g=[],q=[],h=null;this.areOn=function(){return a};this.wasFirstEventPerformed=function(){return d};this.getMouseX=function(){return b};this.getMouseY=function(){return e};this.setMouseX=function(a){b=a};this.setMouseY=function(a){e=a};this.setKeyDownAction=function(a,b){f["k"+a]=b};this.setKeyUpAction=function(a,b){c["k"+a]=b};this.setKeyDownListener=function(a){n=a};this.setKeyUpListener=function(a){p=a};this.setContextMenuListener=
function(a){m=a};this.addMouseMoveListener=function(a){g[g.length]=a};this.removeMouseMoveListener=function(a){var b=g.length,c;for(c=0;c<b;c++)if(g[c]==a){g.splice(c,1);break}};this.addClickListener=function(a){q[q.length]=a};this.removeClickListener=function(a){var b=q.length,c;for(c=0;c<b;c++)if(q[c]==a){q.splice(c,1);break}};this.setRegisteredInputListener=function(a){h=a};this.onKeyDown=function(b){a&&("function"==typeof f["k"+b.which]&&("function"==typeof b.preventDefault&&b.preventDefault(),
"function"==typeof h&&h(),f["k"+b.which]()),"function"==typeof n&&n(b),d=!0)};this.onKeyUp=function(b){a&&("function"==typeof c["k"+b.which]&&("function"==typeof b.preventDefault&&b.preventDefault(),c["k"+b.which]()),"function"==typeof p&&p(b))};this.onContextMenu=function(b){"function"==typeof b.preventDefault&&b.preventDefault();a&&"function"==typeof m&&m(b)};this.onSelectStart=function(a){"function"==typeof a.preventDefault&&a.preventDefault()};this.onMouseMove=function(c){if(a){b=c.clientX;e=
c.clientY;var k=g.length,h;for(h=0;h<k;h++)g[h](c)}};this.onClick=function(c){if(a){b=c.clientX;e=c.clientY;"function"==typeof h&&h();var g=q.length,m;for(m=0;m<g;m++)q[m](c);d=!0}};this.set=function(){a=!0};this.unset=function(){a=!1};window.addEventListener("keydown",this.onKeyDown,!1);window.addEventListener("keyup",this.onKeyUp,!1);window.addEventListener("contextmenu",this.onContextMenu,!1);window.addEventListener("selectstart",this.onSelectStart,!1);window.addEventListener("mousemove",this.onMouseMove,
!1);window.addEventListener("click",this.onClick,!1)};SI.countObjectMembers=function(a){var d=0,b;for(b in a)a.hasOwnProperty(b)&&d++;return d};SI.defineRequestAnimationFrame=function(){window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame};SI.defineVibrate=function(){navigator.vibrate=navigator.vibrate||navigator.mozVibrate||navigator.webkitVibrate||navigator.msVibrate};SI.game={};
SI.game.animation={};SI.game.animation.Explosion=new function(){var a=this,d=null;a.getSpriteSheetWidth=function(){return d.width};a.getSpriteSheetHeight=function(){return d.height};a.setSpriteSheet=function(a){d=a};a.init=function(b){a.setSpriteSheet(b)};a.create=function(a,e,f){return SI.Animation.create(d,a,e,f,SI.res.ResourceLoader.getResources().game.properties.ExplosionSpriteUpdateMaxDelta,SI.res.ResourceLoader.getResources().game.properties.ExplosionRepeat)}};
SI.game.animation.Shot=new function(){var a=this,d=null,b=0;a.getSpriteSheetHalfSize=function(){return b};a.getSpriteSheetWidth=function(){return d.width};a.getSpriteSheetHeight=function(){return d.height};a.setSpriteSheet=function(a){d=a;b=Math.round(d.height/2)};a.init=function(b){a.setSpriteSheet(b)};a.create=function(a,b){return SI.Animation.create(d,a,b,SI.res.ResourceLoader.getResources().game.properties.ShotSpriteIndex,SI.res.ResourceLoader.getResources().game.properties.ShotSpriteUpdateMaxDelta,
SI.res.ResourceLoader.getResources().game.properties.ShotRepeat)}};
SI.game.animation.Splash=new function(){var a=this,d=null,b=0;a.getSpriteSheetHalfSize=function(){return b};a.getSpriteSheetWidth=function(){return d.width};a.getSpriteSheetHeight=function(){return d.height};a.setSpriteSheet=function(a){d=a;b=Math.round(d.height/2)};a.init=function(b){a.setSpriteSheet(b)};a.create=function(a,b){return SI.Animation.create(d,a,b,SI.res.ResourceLoader.getResources().game.properties.SplashSpriteIndex,SI.res.ResourceLoader.getResources().game.properties.SplashSpriteUpdateMaxDelta,
SI.res.ResourceLoader.getResources().game.properties.SplashRepeat)};a.createInCenteredCoords=function(e,d){return a.create(e-b,d-b)}};function steady(){SI.res.ResourceLoader.getResources().game.properties.HUDCrosshairPrecisionRatio=0}function nowind(){SI.res.ResourceLoader.getResources().game.properties.ParachuteHorizontalSpeed=0}
function unstoppable(){SI.res.ResourceLoader.getResources().game.properties.GameLifeSumDifferenceProportion=0;SI.res.ResourceLoader.getResources().game.properties.GameLifeSubtractionDifferenceProportion=0}SI.game.Controls=new function(){function a(){SI.Scene.setFullScreenOnFirstEvent()}this.prepare=function(){SI.Controls.setRegisteredInputListener(a)}};
SI.game.Gamepad=new function(){function a(a,b){a==SI.res.ResourceLoader.getResources().game.properties.GamepadXAxisIndex?SI.Controls.setMouseX(SI.Controls.getMouseX()+b*SI.res.ResourceLoader.getResources().game.properties.GamepadMoveMaxSpeed):a==SI.res.ResourceLoader.getResources().game.properties.GamepadYAxisIndex&&SI.Controls.setMouseY(SI.Controls.getMouseY()+b*SI.res.ResourceLoader.getResources().game.properties.GamepadMoveMaxSpeed)}function d(a){}function b(a){if(a==SI.res.ResourceLoader.getResources().game.properties.GamepadPauseButton1Index||
a==SI.res.ResourceLoader.getResources().game.properties.GamepadPauseButton2Index)SI.Controls.onKeyUp({which:SI.res.ResourceLoader.getResources().game.properties.GamePauseKeyCode});else SI.Controls.onClick({clientX:SI.Controls.getMouseX(),clientY:SI.Controls.getMouseY()})}this.prepare=function(){SI.Gamepad.setButtonDownListener(d);SI.Gamepad.setButtonUpListener(b);SI.Gamepad.setAxisUpdateListener(a)}};
SI.game.HUD=new function(){function a(a){b.shoot()}function d(){I=SI.game.Renderer.getScene().getMouseX()-F;K=SI.game.Renderer.getScene().getMouseY()-F}var b=this,e=null,f=null,c=null,n=null,p=0,m=0,g=0,q=0,h=0,l=0,k=0,u=0,t=0,w=0,r=0,v=0,x=0,z=0,y="#000000",B=0,G=0,D=0,A=0,E=0,H="#000000",F=0,C=0,I=0,K=0,M=0,L=0,J=0,N=0,Q=0,P=0,O=null;b.getLifeBarY=function(){return p};b.getLifeBarLeftX=function(){return m};b.getLifeBarCenterX=function(){return g};b.getLifeBarCenterWidth=function(){return q};b.getLifeBarRightX=
function(){return h};b.getLifeStartX=function(){return l};b.getLifeTotalWidth=function(){return k};b.getLifeWidth=function(){return u};b.getLifeFinalWidth=function(){return t};b.getLifeUpdateDelta=function(){return w};b.getLife=function(){return r};b.getScore=function(){return v};b.getFinalScore=function(){return x};b.getScoreUpdateDelta=function(){return z};b.getScoreColor=function(){return y};b.getScoreBlinkDelta=function(){return B};b.getScoreDifference=function(){return G};b.getScoreDifferenceY=
function(){return D};b.getScoreDifferenceOpacity=function(){return A};b.getScoreDifferenceUpdateDelta=function(){return E};b.getScoreDifferenceColor=function(){return H};b.getCrosshairSpriteHalfSize=function(){return F};b.getCrosshairSpriteIndex=function(){return C};b.getCrosshairX=function(){return I};b.getCrosshairY=function(){return K};b.getCrosshairPrecisionDelta=function(){return M};b.getCrosshairFinalX=function(){return L};b.getCrosshairFinalY=function(){return J};b.getShotXCenterDifference=
function(){return N};b.getShotYCenterDifference=function(){return Q};b.getVulnerableTargetCheckDelta=function(){return P};b.setLifeBarSpriteSheet=function(a){c=SI.Animation.getSpriteInfo(a);p=SI.game.Renderer.getScene().getCanvas().height-2*c.size;m=c.size;g=m+c.size;h=SI.game.Renderer.getScene().getCanvas().width-2*c.size;q=h-g;l=m+SI.res.ResourceLoader.getResources().game.properties.HUDLifeHorizontalOffset;k=h+(c.size-SI.res.ResourceLoader.getResources().game.properties.HUDLifeHorizontalOffset)-
l;e=a};b.setCrosshairSpriteSheet=function(a){n=SI.Animation.getSpriteInfo(a);F=Math.round(n.size/2);N=Math.round((a.width-SI.game.animation.Shot.getSpriteSheetWidth())/2);Q=Math.round((a.height-SI.game.animation.Shot.getSpriteSheetHeight())/2);f=a};b.setLife=function(a){if(isNaN(a)||0>a||100<a)throw Error("Invalid life.");r=a;t=Math.round(r*k/100);0==r&&0==u&&"function"==typeof O&&O()};b.setScore=function(a){if(isNaN(a)||0>a)throw Error("Invalid score.");x=a};b.setScoreDifference=function(a){if(isNaN(a))throw Error("Invalid score difference.");
G=Math.abs(a);D=SI.res.ResourceLoader.getResources().game.properties.HUDScoreDifferenceStartY;A=.1;E=0;H=1>a?SI.res.ResourceLoader.getResources().game.properties.HUDScoreDifferenceNegativeColor:SI.res.ResourceLoader.getResources().game.properties.HUDScoreDifferencePositiveColor};b.setEmptyLifeListener=function(a){O=a};b.init=function(a,c){b.setLifeBarSpriteSheet(a);b.setCrosshairSpriteSheet(c);y=SI.res.ResourceLoader.getResources().game.properties.HUDScoreColor;D=SI.res.ResourceLoader.getResources().game.properties.HUDScoreDifferenceEndY;
H=SI.res.ResourceLoader.getResources().game.properties.HUDScoreDifferencePositiveColor;C=SI.res.ResourceLoader.getResources().game.properties.HUDCrosshairNormal;I=SI.game.Renderer.getScene().getMouseX()-F;K=SI.game.Renderer.getScene().getMouseY()-F};b.resetState=function(){z=x=v=r=w=t=u=0;y=SI.res.ResourceLoader.getResources().game.properties.HUDScoreColor;E=A=D=G=B=0;H=SI.res.ResourceLoader.getResources().game.properties.HUDScoreDifferencePositiveColor;C=0;L=I=SI.game.Renderer.getScene().getMouseX()-
F;J=K=SI.game.Renderer.getScene().getMouseY()-F;P=M=0;O=null};b.setControlsListeners=function(){SI.Controls.addClickListener(a)};b.unsetControlsListeners=function(){SI.Controls.removeClickListener(a)};b.sumLife=function(a){if(isNaN(a)||0>a)throw Error("Invalid life percentage difference.");a=r+a;100<a&&(a=100);b.setLife(a)};b.subtractLife=function(a){if(isNaN(a)||0>a)throw Error("Invalid life percentage difference.");a=r-a;0>a&&(a=0);b.setLife(a)};b.sumScore=function(a){if(isNaN(a)||0>a)throw Error("Invalid difference.");
x+=a;b.setScoreDifference(a)};b.subtractScore=function(a){if(isNaN(a)||0>a)throw Error("Invalid difference.");x-=a;b.setScoreDifference(-a)};b.shoot=function(){var a=L-I,b=J-K;d();L=I+a;J=K+b;var a=L+N,b=J+Q,c=a+SI.game.animation.Shot.getSpriteSheetHalfSize(),g=b+SI.game.animation.Shot.getSpriteSheetHalfSize();SI.game.animation.Shot.create(a,b);SI.game.Scenery.isExploding()||SI.game.target.Enemy.penetrateAt(c,g)||SI.game.target.Parachute.pinchAt(c,g)};b.renderLogic=function(){d();w++;w>=SI.res.ResourceLoader.getResources().game.properties.HUDLifeUpdateMaxDelta&&
(w=0,u!=t&&(u<t?(u+=SI.res.ResourceLoader.getResources().game.properties.HUDLifeUpdateSpeed,u>t&&(u=t)):(u-=SI.res.ResourceLoader.getResources().game.properties.HUDLifeUpdateSpeed,u<t&&(u=t)),0==u&&"function"==typeof O&&O()));z++;z>=SI.res.ResourceLoader.getResources().game.properties.HUDScoreUpdateMaxDelta&&(z=0,v!=x&&(v<x?(v+=SI.res.ResourceLoader.getResources().game.properties.HUDScoreUpdateSpeed,v>x&&(v=x)):(v-=SI.res.ResourceLoader.getResources().game.properties.HUDScoreUpdateSpeed,v<x&&(v=x))));
B++;B>=SI.res.ResourceLoader.getResources().game.properties.HUDScoreBlinkMaxDelta&&(B=0,y=y==SI.res.ResourceLoader.getResources().game.properties.HUDScoreColor?SI.res.ResourceLoader.getResources().game.properties.HUDScoreBlinkColor:SI.res.ResourceLoader.getResources().game.properties.HUDScoreColor);E++;if(E>=SI.res.ResourceLoader.getResources().game.properties.HUDScoreDifferenceUpdateMaxDelta&&(E=0,0<A)){var a;D>SI.res.ResourceLoader.getResources().game.properties.HUDScoreDifferenceEndY?(D-=SI.res.ResourceLoader.getResources().game.properties.HUDScoreDifferenceVerticalSpeed,
D<SI.res.ResourceLoader.getResources().game.properties.HUDScoreDifferenceEndY&&(D=SI.res.ResourceLoader.getResources().game.properties.HUDScoreDifferenceEndY),a=A+SI.res.ResourceLoader.getResources().game.properties.HUDScoreDifferenceOpacitySpeed,1<a&&(a=1)):(a=A-SI.res.ResourceLoader.getResources().game.properties.HUDScoreDifferenceOpacitySpeed,0>a&&(a=0));A=a}M++;if(M>=SI.res.ResourceLoader.getResources().game.properties.HUDCrosshairPrecisionMaxDelta){M=0;a=Math.round(Math.random());var b=Math.round(Math.random()),
c=Math.round(Math.random()*SI.res.ResourceLoader.getResources().game.properties.HUDCrosshairPrecisionRatio),g=Math.round(Math.random()*SI.res.ResourceLoader.getResources().game.properties.HUDCrosshairPrecisionRatio);L=I+(1==a?c:-c);J=K+(1==b?g:-g)}P++;P>=SI.res.ResourceLoader.getResources().game.properties.HUDVulnerableTargetCheckMaxDelta&&(P=0,C=SI.game.target.Enemy.isVulnerableTarget(SI.game.Renderer.getScene().getMouseX(),SI.game.Renderer.getScene().getMouseY())?SI.res.ResourceLoader.getResources().game.properties.HUDCrosshairDetectedTarget:
SI.res.ResourceLoader.getResources().game.properties.HUDCrosshairNormal)};b.renderGraphics=function(){SI.game.Renderer.getScene().getContext().drawImage(f,n.framesCoords[C],0,n.size,n.size,L,J,n.size,n.size);SI.game.Renderer.getScene().getContext().drawImage(e,c.framesCoords[SI.res.ResourceLoader.getResources().game.properties.HUDLifeBarLife],0,c.size,c.size,l,p,u,c.size);SI.game.Renderer.getScene().getContext().drawImage(e,c.framesCoords[SI.res.ResourceLoader.getResources().game.properties.HUDLifeBarLeft],
0,c.size,c.size,m,p,c.size,c.size);SI.game.Renderer.getScene().getContext().drawImage(e,c.framesCoords[SI.res.ResourceLoader.getResources().game.properties.HUDLifeBarCenter],0,c.size,c.size,g,p,q,c.size);SI.game.Renderer.getScene().getContext().drawImage(e,c.framesCoords[SI.res.ResourceLoader.getResources().game.properties.HUDLifeBarRight],0,c.size,c.size,h,p,c.size,c.size);var a=SI.game.Renderer.getScene().getContext().font,b=SI.game.Renderer.getScene().getContext().fillStyle;SI.game.Renderer.getScene().getContext().font=
SI.res.ResourceLoader.getResources().game.properties.HUDScoreFont;SI.game.Renderer.getScene().getContext().fillStyle=y;SI.game.Renderer.getScene().getContext().fillText(SI.res.ResourceLoader.getResources().game.properties.HUDScorePrefix+""+v.toString(),SI.res.ResourceLoader.getResources().game.properties.HUDScoreX,SI.res.ResourceLoader.getResources().game.properties.HUDScoreY);SI.game.Renderer.getScene().getContext().font=a;SI.game.Renderer.getScene().getContext().fillStyle=b;if(!(0>=A)){var a=SI.game.Renderer.getScene().getContext().globalAlpha,
b=SI.game.Renderer.getScene().getContext().font,k=SI.game.Renderer.getScene().getContext().fillStyle;SI.game.Renderer.getScene().getContext().globalAlpha=A;SI.game.Renderer.getScene().getContext().font=SI.res.ResourceLoader.getResources().game.properties.HUDScoreDifferenceFont;SI.game.Renderer.getScene().getContext().fillStyle=H;SI.game.Renderer.getScene().getContext().fillText(G.toString(),SI.res.ResourceLoader.getResources().game.properties.HUDScoreDifferenceX,D);SI.game.Renderer.getScene().getContext().globalAlpha=
a;SI.game.Renderer.getScene().getContext().font=b;SI.game.Renderer.getScene().getContext().fillStyle=k}}};SI.game.Interface=new function(){var a=this;a.getDisplayedModule=function(){for(var a in SI.game.ui)if(SI.game.ui[a].isDisplayed())return SI.game.ui[a];return null};a.renderDisplayedLogic=function(){var d=a.getDisplayedModule();null!=d&&d.renderLogic()};a.renderDisplayedGraphics=function(){var d=a.getDisplayedModule();null!=d&&d.renderGraphics()}};
SI.game.Renderer=new function(){function a(){SI.res.ResourceLoader.setLoadCache(c.LOAD_CACHE);document.body.style.backgroundColor="black"}function d(){console.error("One or various resources couldn't be loaded correctly, please refresh this page.");alert("One or various resources couldn't be loaded correctly. Refreshing page...");window.location.reload()}function b(){console.log("All resources were loaded correctly.");var a=SI.res.ResourceLoader.getResources().game.properties.SceneFonts.length,b;
for(b=0;b<a;b++)SI.Scene.loadFont(SI.res.ResourceLoader.getResources().game.properties.SceneFonts[b].name,SI.res.ResourceLoader.getResources().game.properties.SceneFonts[b].path,SI.res.ResourceLoader.getResources().game.properties.SceneFonts[b].svgId);n=SI.Scene.create();n.setIconUrl(SI.res.ResourceLoader.getResources().game.properties.SceneIconUrl);n.setCursorUrl(SI.res.ResourceLoader.getResources().game.properties.SceneCursorUrl);n.setTitle(SI.res.ResourceLoader.getResources().game.properties.SceneTitle);
n.setBackgroundColor(SI.res.ResourceLoader.getResources().game.properties.SceneBackgroundColor);n.setCanvasBackgroundColor(SI.res.ResourceLoader.getResources().game.properties.SceneCanvasBackgroundColor);screen.width<SI.res.ResourceLoader.getResources().game.properties.MinScreenWidth?(SI.res.ResourceLoader.getResources().game.properties.SceneFullScreenOnFirstEvent=!1,n.setWidth(SI.res.ResourceLoader.getResources().game.properties.SceneWidth),n.setHeight(SI.res.ResourceLoader.getResources().game.properties.SceneHeight),
document.getElementById("viewport").setAttribute("content","width="+SI.res.ResourceLoader.getResources().game.properties.SceneWidth+", user-scalable=no")):n.adjustSizeToScreen(SI.res.ResourceLoader.getResources().game.properties.SpriteSize);n.buildInDOM();SI.Animation.init(SI.game.Renderer.getScene().getContext());SI.game.animation.Explosion.init(SI.res.ResourceLoader.getResources().images.scenery.explosion);SI.game.animation.Shot.init(SI.res.ResourceLoader.getResources().images.hud.shot);SI.game.animation.Splash.init(SI.res.ResourceLoader.getResources().images.target.splash);
SI.game.Scenery.init(SI.res.ResourceLoader.getResources().images.scenery.cloud.c1,SI.res.ResourceLoader.getResources().images.scenery.cloud.c2,SI.res.ResourceLoader.getResources().images.scenery.cloud.c3,SI.res.ResourceLoader.getResources().images.scenery.mountains,SI.res.ResourceLoader.getResources().images.scenery.trees);SI.game.HUD.init(SI.res.ResourceLoader.getResources().images.hud.lifebar,SI.res.ResourceLoader.getResources().images.hud.crosshair);SI.game.target.Parachute.init(SI.game.Renderer.getScene().getCanvas(),
SI.game.Renderer.getScene().getContext(),SI.res.ResourceLoader.getResources().images.target.parachute);SI.game.target.Enemy.init(SI.game.Renderer.getScene().getCanvas(),SI.game.Renderer.getScene().getContext(),[SI.res.ResourceLoader.getResources().images.target.enemy.e1,SI.res.ResourceLoader.getResources().images.target.enemy.e2,SI.res.ResourceLoader.getResources().images.target.enemy.e3,SI.res.ResourceLoader.getResources().images.target.enemy.e4,SI.res.ResourceLoader.getResources().images.target.enemy.e5,
SI.res.ResourceLoader.getResources().images.target.enemy.e6,SI.res.ResourceLoader.getResources().images.target.enemy.e7,SI.res.ResourceLoader.getResources().images.target.enemy.e8,SI.res.ResourceLoader.getResources().images.target.enemy.e9,SI.res.ResourceLoader.getResources().images.target.enemy.e10,SI.res.ResourceLoader.getResources().images.target.enemy.e11,SI.res.ResourceLoader.getResources().images.target.enemy.e12]);SI.game.ui.IntroMessage.init(SI.res.ResourceLoader.getResources().cursors.cursor);
SI.game.ui.StartScreen.init(SI.res.ResourceLoader.getResources().images.ui.StartScreen.logo,SI.res.ResourceLoader.getResources().images.ui.StartScreen.esrb,SI.res.ResourceLoader.getResources().cursors.cursor);SI.game.ui.Game.init();SI.game.ui.Credits.init(SI.res.ResourceLoader.getResources().cursors.cursor);SI.game.ui.IntroMessage.display();SI.Renderer.render();SI.game.Controls.prepare();SI.Controls.set();SI.game.Gamepad.prepare();SI.Gamepad.setTrackTime(SI.res.ResourceLoader.getResources().game.properties.GamepadTrackTime);
SI.Gamepad.enable()}function e(){SI.game.Interface.renderDisplayedLogic()}function f(){SI.game.Interface.renderDisplayedGraphics()}var c=this;c.LOAD_CACHE=!0;var n=null;c.getScene=function(){return n};c.useThisRenderer=function(){SI.Renderer.setBeforeLoadListener(a);SI.Renderer.setLoadErrorListener(d);SI.Renderer.setPrepareListener(b);SI.Renderer.setLogicRenderListener(e);SI.Renderer.setGraphicsRenderListener(f)}};
SI.game.Scenery=new function(){var a=this,d=null,b=null,e=null,f=null,c=null,n=0,p=0,m=0,g=0,q=0,h=0,l="#ffffff",k=0,u=0,t=0,w=0,r=!1,v=!0,x=0,z=0,y=!1,B=0,G=0,D=0,A=0,E=!1,H=0,F=0,C=0,I=0,K=0,M=0,L=0,J=[],N=null;a.getCloud1X=function(){return n};a.getCloud1Y=function(){return p};a.getCloud2X=function(){return m};a.getCloud2Y=function(){return g};a.getCloud3X=function(){return q};a.getCloud3Y=function(){return h};a.getSkyColor=function(){return l};a.getMountainsSpriteX=function(){return k};a.getMountainsSpriteY=
function(){return u};a.getTreesY=function(){return t};a.getCloudsUpdateDelta=function(){return w};a.isDawnOrDusk=function(){return r};a.isDaylight=function(){return v};a.getSkyUpdateDelta=function(){return x};a.getToggleDaylightDelta=function(){return z};a.isExploding=function(){return y};a.getDestructionDelta=function(){return B};a.getUpdateRedFilterDelta=function(){return G};a.getRedFilterLevel=function(){return D};a.getRedFilterProgression=function(){return A};a.bigExplosionInProgress=function(){return E};
a.getBigExplosionX=function(){return H};a.getBigExplosionY=function(){return F};a.getBigExplosionRadius=function(){return C};a.getBigExplosionDelta=function(){return I};a.getBigExplosionMaxWidth=function(){return K};a.getBigExplosionMaxHeight=function(){return M};a.getdoublePI=function(){return L};a.setCloud1SpriteSheet=function(a){n=SI.game.Renderer.getScene().getCenterXCoord(a.width);p=0;d=a};a.setCloud2SpriteSheet=function(a){m=-Math.round(a.width/2);g=a.height;b=a};a.setCloud3SpriteSheet=function(a){q=
SI.game.Renderer.getScene().getCanvas().width-Math.round(a.width/2);h=a.height;e=a};a.setMountainsSpriteSheet=function(a){k=SI.game.Renderer.getScene().getCenterXCoord(a.width);u=SI.game.Renderer.getScene().getCanvas().height-a.height;f=a};a.setTreesSpriteSheet=function(a){t=SI.game.Renderer.getScene().getCanvas().height-a.height;c=a};a.setDestructionListener=function(a){N=a};a.init=function(b,c,g,h,k){a.setCloud1SpriteSheet(b);a.setCloud2SpriteSheet(c);a.setCloud3SpriteSheet(g);a.setMountainsSpriteSheet(h);
a.setTreesSpriteSheet(k);l=SI.res.ResourceLoader.getResources().game.properties.ScenerySkyDayColor;H=Math.round(SI.game.Renderer.getScene().getCanvas().width/2);F=SI.game.Renderer.getScene().getCanvas().height;K=SI.game.Renderer.getScene().getCanvas().width+SI.res.ResourceLoader.getResources().game.properties.SceneryBigExplosionHorizontalExtra;M=SI.game.Renderer.getScene().getCanvas().height+SI.res.ResourceLoader.getResources().game.properties.SceneryBigExplosionVerticalExtra;L=2*Math.PI};a.resetState=
function(){l=SI.res.ResourceLoader.getResources().game.properties.ScenerySkyDayColor;w=0;r=!1;v=!0;I=C=A=D=G=B=z=x=0;N=null;a.stopExplosions()};a.setControlsListeners=function(){};a.unsetControlsListeners=function(){};a.dawn=function(){r||v||(v=r=!0,x=0)};a.dusk=function(){!r&&v&&(r=!0,v=!1,x=0)};a.toggleDaylight=function(){v?a.dusk():a.dawn()};a.startExplosions=function(){if(!y){y=!0;D=G=0;A=SI.res.ResourceLoader.getResources().game.properties.SceneryRedFilterSpeed;B=1;E=!1;C=0;var a=!0,b,c,g,h;
for(g=0;g<SI.game.Renderer.getScene().getCanvas().height;g+=SI.game.animation.Explosion.getSpriteSheetHeight())for(b=a=!a,c=0;c<SI.game.Renderer.getScene().getCanvas().width;c+=SI.game.animation.Explosion.getSpriteSheetHeight())h=b?4:0,b=!b,J.push(SI.game.animation.Explosion.create(c,g,h))}};a.stopExplosions=function(){if(y){E=y=!1;C=0;var a=J.length,b;for(b=0;b<a;b++)J[b].finish();J=[]}};a.renderLogic=function(){w++;w>=SI.res.ResourceLoader.getResources().game.properties.SceneryCloudsUpdateMaxDelta&&
(w=0,n++,n>SI.game.Renderer.getScene().getCanvas().width&&(n=-d.width),m++,m>SI.game.Renderer.getScene().getCanvas().width&&(m=-b.width),q++,q>SI.game.Renderer.getScene().getCanvas().width&&(q=-e.width));if(r&&(x++,x>=SI.res.ResourceLoader.getResources().game.properties.ScenerySkyUpdateMaxDelta)){x=0;var c;c=v?SI.res.ResourceLoader.getResources().game.properties.ScenerySkyDayColor:SI.res.ResourceLoader.getResources().game.properties.ScenerySkyNightColor;var g=parseInt(l[1]+""+l[2],16),h=parseInt(l[3]+
""+l[4],16),k=parseInt(l[5]+""+l[6],16),f=parseInt(c[1]+""+c[2],16),t=parseInt(c[3]+""+c[4],16),u=parseInt(c[5]+""+c[6],16);g<f?g++:g>f&&g--;h<t?h++:h>t&&h--;k<u?k++:k>u&&k--;f=g.toString(16);t=h.toString(16);u=k.toString(16);16>g&&(f="0"+f);16>h&&(t="0"+t);16>k&&(u="0"+u);l="#"+f+t+u;l==c&&(r=!1)}z++;z>=SI.res.ResourceLoader.getResources().game.properties.SceneryToggleDaylightMaxDelta&&(z=0,a.toggleDaylight());y&&(G++,G>=SI.res.ResourceLoader.getResources().game.properties.SceneryUpdateRedFilterMaxDelta&&
(G=0,c=D+A,c>=SI.res.ResourceLoader.getResources().game.properties.SceneryRedFilterMaxLevel?(c=SI.res.ResourceLoader.getResources().game.properties.SceneryRedFilterMaxLevel,A=-SI.res.ResourceLoader.getResources().game.properties.SceneryRedFilterSpeed):0>=c&&(c=0,A=SI.res.ResourceLoader.getResources().game.properties.SceneryRedFilterSpeed),D=c));1>B||(B++,B>=SI.res.ResourceLoader.getResources().game.properties.SceneryDestructionMaxDelta&&(B=0,E=!0));I++;I>=SI.res.ResourceLoader.getResources().game.properties.SceneryBigExplosionMaxDelta&&
(I=0,E&&(C+=SI.res.ResourceLoader.getResources().game.properties.SceneryBigExplosionSpeed,C>=K&&C>=M&&(E=!1,"function"==typeof N&&N())))};a.renderGraphics=function(){var a=SI.game.Renderer.getScene().getContext().fillStyle;SI.game.Renderer.getScene().getContext().fillStyle=l;SI.game.Renderer.getScene().getContext().fillRect(0,0,SI.game.Renderer.getScene().getCanvas().width,SI.game.Renderer.getScene().getCanvas().height);SI.game.Renderer.getScene().getContext().fillStyle=a;SI.game.Renderer.getScene().getContext().drawImage(f,
k,u);SI.game.Renderer.getScene().getContext().drawImage(d,n,p);SI.game.Renderer.getScene().getContext().drawImage(b,m,g);SI.game.Renderer.getScene().getContext().drawImage(e,q,h);var a=SI.game.Renderer.getScene().getWidth(),r=c.width,w;for(w=0;w<=a;w+=r)SI.game.Renderer.getScene().getContext().drawImage(c,w,t);y&&(a=SI.game.Renderer.getScene().getContext().globalAlpha,SI.game.Renderer.getScene().getContext().fillStyle=SI.res.ResourceLoader.getResources().game.properties.SceneryRedFilterColor,SI.game.Renderer.getScene().getContext().globalAlpha=
D,SI.game.Renderer.getScene().getContext().fillRect(0,0,SI.game.Renderer.getScene().getCanvas().width,SI.game.Renderer.getScene().getCanvas().height),SI.game.Renderer.getScene().getContext().globalAlpha=a);1>C||(a=SI.game.Renderer.getScene().getContext().fillStyle,SI.game.Renderer.getScene().getContext().beginPath(),SI.game.Renderer.getScene().getContext().arc(H,F,C,0,L,!1),SI.game.Renderer.getScene().getContext().fillStyle=SI.res.ResourceLoader.getResources().game.properties.SceneryBigExplosionColor,
SI.game.Renderer.getScene().getContext().fill(),SI.game.Renderer.getScene().getContext().fillStyle=a)}};SI.game.target={};
SI.game.target.Enemy=new function(){var a=this,d=[],b=null,e=null,f=[],c=0,n=0,p=null,m=null;a["class"]=function(a,c,h,l){var k=this,n=0,t=null,w=0,r=0,v=0;k.getSpriteSheetIndex=function(){return a};k.getX=function(){return c};k.getY=function(){return h};k.getDropSpeed=function(){return l};k.getFreeFallSpeed=function(){return n};k.getSpriteIndex=function(){return w};k.getDropUpdateDelta=function(){return r};k.getSpriteUpdateDelta=function(){return v};k.getAbsoluteX=function(){return c-f[a].halfSize};
k.getAbsoluteY=function(){return h};k.hasParachute=function(){return null!=t};k.dropParachute=function(){k.hasParachute()&&(t.setTranslationListener(null),t.setPinchListener(null),t=null)};k.isVulnerableTarget=function(b,c){return SI.checkObjectHit(b,c,k.getAbsoluteX(),k.getAbsoluteY(),f[a].info.size,f[a].info.spritesImagesDatas[w])};k.penetrateAt=function(b,c){if(!SI.checkObjectHit(b,c,k.getAbsoluteX(),k.getAbsoluteY(),f[a].info.size,f[a].info.spritesImagesDatas[w]))return!1;k.hasParachute()&&t.finish();
k.finish();"function"==typeof m&&m(k);SI.game.animation.Splash.createInCenteredCoords(b,c);return!0};k.finish=function(){SI.safeObjectArrayLoop(d,function(a,b){return b==k?(d.splice(a,1),!1):!0})};k.renderLogic=function(){r++;r>=SI.res.ResourceLoader.getResources().game.properties.EnemyDropUpdateMaxDelta&&(r=0,k.hasParachute()||(h+=n),h>=b.height&&(k.finish(),"function"==typeof p&&p(k)));v++;v>SI.res.ResourceLoader.getResources().game.properties.EnemySpriteUpdateMaxDelta&&(v=0,k.hasParachute()||(w=
w>=f[a].maxIndex?0:w+1))};k.renderGraphics=function(){e.drawImage(f[a].spriteSheet,f[a].info.framesCoords[w],0,f[a].info.size,f[a].info.size,k.getAbsoluteX(),k.getAbsoluteY(),f[a].info.size,f[a].info.size)};n=l*SI.res.ResourceLoader.getResources().game.properties.EnemyFreeFallMultiplication;t=SI.game.target.Parachute.create(c,h,l);c=t.getX();h=t.getY()+SI.game.target.Parachute.getSpriteSheetHalfSize();t.setTranslationListener(function(){c=t.getX();h=t.getY()+SI.game.target.Parachute.getSpriteSheetHalfSize()});
t.setPinchListener(function(){k.dropParachute()})};a.getSpritesSheetsAverageSize=function(){return c};a.getSpritesSheetsAverageHalfSize=function(){return n};a.setCanvas=function(a){b=a};a.setContext=function(a){e=a};a.setSpritesSheets=function(a){var b=0,h=a.length,l,k;f=[];for(l=0;l<h;l++)k={},k.info=SI.Animation.getSpriteInfo(a[l],!0),k.halfSize=Math.round(k.info.size/2),k.maxIndex=k.info.framesCoords.length-1,k.spriteSheet=a[l],b+=k.info.size,f.push(k);c=Math.round(b/f.length);n=Math.round(c/2)};
a.setGroundReachedListener=function(a){p=a};a.setHitListener=function(a){m=a};a.getCount=function(){return d.length};a.init=function(b,c,h){a.setCanvas(b);a.setContext(c);a.setSpritesSheets(h)};a.resetState=function(){d=[];m=p=null};a.setControlsListeners=function(){};a.unsetControlsListeners=function(){};a.create=function(b,c,h,l){b=new a["class"](b,c,h,l);d.push(b);return b};a.spawnRandom=function(b,c,h){if(0!=f.length)return a.create(Math.floor(Math.random()*f.length),b,c,h)};a.isVulnerableTarget=
function(a,b){var c=!1;SI.safeObjectArrayReverseLoop(d,function(l,k){return k.isVulnerableTarget(a,b)?(c=!0,!1):!0});return c};a.penetrateAt=function(a,b){SI.safeObjectArrayReverseLoop(d,function(c,l){return l.penetrateAt(a,b)?!1:!0})};a.renderLogic=function(){SI.safeObjectArrayLoop(d,function(a,b){b.renderLogic();return!0})};a.renderGraphics=function(){SI.safeObjectArrayLoop(d,function(a,b){b.renderGraphics();return!0})}};
SI.game.target.Parachute=new function(){var a=this,d=[],b=null,e=null,f=null,c=null,n=0,p=0;a["class"]=function(a,g,q){var h=this,l=0,k=0,u=0,t=-1,w=1,r=0,v=0,x=!1,z=null,y=null;h.getX=function(){return a};h.getY=function(){return g};h.getDropSpeed=function(){return q};h.getSpriteIndex=function(){return l};h.getDropUpdateDelta=function(){return k};h.getHorizontalSpeed=function(){return u};h.getHorizontalSpeedProgression=function(){return t};h.getHorizontalDisplacement=function(){return w};h.getHorizontalDisplacementDelta=
function(){return r};h.getPinchUpdateDelta=function(){return v};h.isPinched=function(){return x};h.getAbsoluteX=function(){return a-n};h.getAbsoluteY=function(){return g};h.setTranslationListener=function(a){z=a};h.setPinchListener=function(a){y=a};h.pinchAt=function(a,b){if(!SI.checkObjectHit(a,b,h.getAbsoluteX(),h.getAbsoluteY(),c.size,c.spritesImagesDatas[l]))return!1;x?h.finish():(x=!0,"function"==typeof y&&y());SI.game.animation.Splash.createInCenteredCoords(a,b);return!0};h.finish=function(){SI.safeObjectArrayLoop(d,
function(a,b){return b==h?(d.splice(a,1),!1):!0})};h.renderLogic=function(){k++;k>=SI.res.ResourceLoader.getResources().game.properties.ParachuteDropUpdateMaxDelta&&(k=0,g+=q,"function"==typeof z&&z(),g>=b.height&&h.finish());r++;r>=SI.res.ResourceLoader.getResources().game.properties.ParachuteHorizontalDisplacementMaxDelta&&(r=0,u+=t,u>SI.res.ResourceLoader.getResources().game.properties.ParachuteHorizontalSpeed?(u=SI.res.ResourceLoader.getResources().game.properties.ParachuteHorizontalSpeed,t=-1):
1>u&&(t=u=1,w=1==w?-1:1),a+=u*w,"function"==typeof z&&z());v++;v>=SI.res.ResourceLoader.getResources().game.properties.ParachutePinchUpdateMaxDelta&&(v=0,x&&l<p&&l++)};h.renderGraphics=function(){e.drawImage(f,c.framesCoords[l],0,c.size,c.size,h.getAbsoluteX(),h.getAbsoluteY(),c.size,c.size)};u=SI.res.ResourceLoader.getResources().game.properties.ParachuteHorizontalSpeed};a.getSpriteSheetHalfSize=function(){return n};a.getSpriteSheetMaxIndex=function(){return p};a.setCanvas=function(a){b=a};a.setContext=
function(a){e=a};a.setSpriteSheet=function(a){c=SI.Animation.getSpriteInfo(a,!0);n=Math.round(c.size/2);p=c.framesCoords.length-1;f=a};a.init=function(b,c,d){a.setCanvas(b);a.setContext(c);a.setSpriteSheet(d)};a.resetState=function(){d=[]};a.setControlsListeners=function(){};a.unsetControlsListeners=function(){};a.create=function(b,c,e){b=new a["class"](b,c,e);d.push(b);return b};a.pinchAt=function(a,b){var c=!1;SI.safeObjectArrayReverseLoop(d,function(h,l){return l.pinchAt(a,b)?(c=!0,!1):!0});return c};
a.renderLogic=function(){SI.safeObjectArrayLoop(d,function(a,b){b.renderLogic();return!0})};a.renderGraphics=function(){SI.safeObjectArrayLoop(d,function(a,b){b.renderGraphics();return!0})}};SI.game.ui={};
SI.game.ui.Credits=new function(){function a(){d()}function d(){b.close();SI.game.ui.StartScreen.display()}var b=this,e=!1,f=null,c=0,n=0,p=0,m=!1,g=0,q=[];b.isDisplayed=function(){return e};b.getCreditsY=function(){return c};b.getCreditsHeight=function(){return n};b.getCreditsUpdateDelta=function(){return p};b.skipMessageDisplayed=function(){return m};b.getSkipMessageDelta=function(){return g};b.setCursorSpriteSheet=function(a){f=a};b.init=function(a){b.setCursorSpriteSheet(a)};b.display=function(b){if(!(e||
isNaN(b)||0>b)){e=!0;p=n=c=0;SI.Controls.addClickListener(a);SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.CreditsSkipKeyCode1,a);SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.CreditsSkipKeyCode2,a);var l=SI.res.ResourceLoader.getResources().game.properties.CreditsScoreTitle+b+SI.res.ResourceLoader.getResources().game.properties.CreditsLines;b=SI.game.Renderer.getScene().getContext().font;var k=SI.game.Renderer.getScene().getContext().fillStyle,
l=l.split("\n"),d=l.length,g,f;q=[];SI.game.Renderer.getScene().getContext().font=SI.res.ResourceLoader.getResources().game.properties.CreditsFont;SI.game.Renderer.getScene().getContext().fillStyle=SI.res.ResourceLoader.getResources().game.properties.CreditsColor;for(g=0;g<d;g++)f={},f.text=l[g],f.x=SI.game.Renderer.getScene().getCenterXCoord(SI.game.Renderer.getScene().getContext().measureText(f.text).width),q.push(f);c=SI.game.Renderer.getScene().getCanvas().height;n=d*SI.res.ResourceLoader.getResources().game.properties.CreditsLineHeight;
SI.game.Renderer.getScene().getContext().font=b;SI.game.Renderer.getScene().getContext().fillStyle=k}};b.close=function(){e&&(e=!1,p=n=c=0,SI.Controls.removeClickListener(a),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.CreditsSkipKeyCode1,null),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.CreditsSkipKeyCode2,null))};b.renderLogic=function(){p++;p>=SI.res.ResourceLoader.getResources().game.properties.CreditsUpdateMaxDelta&&(p=0,
c-=SI.res.ResourceLoader.getResources().game.properties.CreditsSpeed,0>=c+n&&d());g++;g>=SI.res.ResourceLoader.getResources().game.properties.CreditsSkipMessageMaxDelta&&(g=0,m=!m)};b.renderGraphics=function(){SI.game.Renderer.getScene().getContext().fillStyle=SI.res.ResourceLoader.getResources().game.properties.CreditsBackgroundColor;SI.game.Renderer.getScene().getContext().fillRect(0,0,SI.game.Renderer.getScene().getCanvas().width,SI.game.Renderer.getScene().getCanvas().height);var a=SI.game.Renderer.getScene().getContext().font,
b=SI.game.Renderer.getScene().getContext().fillStyle,k=c,g=q.length,d,e;SI.game.Renderer.getScene().getContext().font=SI.res.ResourceLoader.getResources().game.properties.CreditsFont;SI.game.Renderer.getScene().getContext().fillStyle=SI.res.ResourceLoader.getResources().game.properties.CreditsColor;for(d=0;d<g;d++)e=q[d],SI.game.Renderer.getScene().getContext().fillText(e.text,e.x,k),k+=SI.res.ResourceLoader.getResources().game.properties.CreditsLineHeight;SI.game.Renderer.getScene().getContext().font=
a;SI.game.Renderer.getScene().getContext().fillStyle=b;SI.game.Renderer.getScene().getContext().drawImage(f,SI.game.Renderer.getScene().getMouseX(),SI.game.Renderer.getScene().getMouseY());m&&(a=SI.game.Renderer.getScene().getContext().font,b=SI.game.Renderer.getScene().getContext().fillStyle,SI.game.Renderer.getScene().getContext().font=SI.res.ResourceLoader.getResources().game.properties.CreditsSkipMessageFont,SI.game.Renderer.getScene().getContext().fillStyle=SI.res.ResourceLoader.getResources().game.properties.CreditsSkipMessageColor,
SI.game.Renderer.getScene().getContext().fillText(SI.res.ResourceLoader.getResources().game.properties.CreditsSkipMessageText,SI.res.ResourceLoader.getResources().game.properties.CreditsSkipMessageX,SI.res.ResourceLoader.getResources().game.properties.CreditsSkipMessageY),SI.game.Renderer.getScene().getContext().font=a,SI.game.Renderer.getScene().getContext().fillStyle=b)}};
SI.game.ui.Game=new function(){function a(){z=SI.res.ResourceLoader.getResources().game.properties.GameSpawnEnemiesInitialDelta;y=0;B=SI.res.ResourceLoader.getResources().game.properties.GameEnemiesInitialDropSpeed;A=0;E=H=F=C=!1;SI.game.Scenery.resetState();SI.game.target.Parachute.resetState();SI.game.target.Enemy.resetState();SI.Animation.resetState();SI.game.HUD.resetState()}function d(){if(!(SI.game.target.Enemy.getCount()>=SI.res.ResourceLoader.getResources().game.properties.GameMaxEnemies)){var a=
SI.game.target.Enemy.getSpritesSheetsAverageSize(),b=SI.game.Renderer.getScene().getCanvas().width-a;SI.game.target.Enemy.spawnRandom(Math.round(Math.random()*(b-a)+a),x,B)}}function b(){var a=SI.game.HUD.getFinalScore();r.close();SI.game.ui.Credits.display(a)}function e(a){if(SI.Renderer.isRendering()){SI.game.HUD.unsetControlsListeners();SI.Renderer.stopRendering();a=SI.game.Renderer.getScene().getContext().globalAlpha;var b=SI.game.Renderer.getScene().getContext().font,c=SI.game.Renderer.getScene().getContext().fillStyle;
SI.game.Renderer.getScene().getContext().globalAlpha=SI.res.ResourceLoader.getResources().game.properties.GamePauseBackgroundOpacity;SI.game.Renderer.getScene().getContext().fillStyle=SI.res.ResourceLoader.getResources().game.properties.GamePauseBackgroundColor;SI.game.Renderer.getScene().getContext().fillRect(0,0,SI.game.Renderer.getScene().getCanvas().width,SI.game.Renderer.getScene().getCanvas().height);SI.game.Renderer.getScene().getContext().globalAlpha=a;SI.game.Renderer.getScene().getContext().font=
SI.res.ResourceLoader.getResources().game.properties.GamePauseMessageFont;SI.game.Renderer.getScene().getContext().fillStyle=SI.res.ResourceLoader.getResources().game.properties.GamePauseMessageColor;SI.game.Renderer.getScene().getContext().fillText(SI.res.ResourceLoader.getResources().game.properties.GamePauseMessageText,G,D);SI.game.Renderer.getScene().getContext().font=b;SI.game.Renderer.getScene().getContext().fillStyle=c}else SI.Renderer.render(),SI.game.HUD.setControlsListeners()}function f(a){E=
!0}function c(a){H=!0}function n(a){F=!0}function p(a){C=!0}function m(a){E=!1}function g(a){H=!1}function q(a){F=!1}function h(a){C=!1}function l(a){SI.Renderer.isRendering()&&SI.game.HUD.shoot()}function k(a){a.hasParachute()?(SI.game.HUD.subtractLife(SI.res.ResourceLoader.getResources().game.properties.GameLifeSubtractionDifferenceProportion),SI.game.Scenery.isExploding()||SI.vibrate(SI.res.ResourceLoader.getResources().game.properties.GameGroundReachedVibrationTime)):(t(),SI.game.HUD.sumScore(SI.res.ResourceLoader.getResources().game.properties.GameScoreSumFallDifference),
SI.game.HUD.sumLife(SI.res.ResourceLoader.getResources().game.properties.GameLifeSumDifferenceProportion))}function u(a){t();SI.game.HUD.sumScore(SI.res.ResourceLoader.getResources().game.properties.GameScoreSumHitDifference);SI.game.HUD.sumLife(SI.res.ResourceLoader.getResources().game.properties.GameLifeSumDifferenceProportion)}function t(){var a=B+SI.res.ResourceLoader.getResources().game.properties.GameEnemiesDropSpeedDifference;1>SI.res.ResourceLoader.getResources().game.properties.GameEnemiesFinalDropSpeed?
B=a:B<SI.res.ResourceLoader.getResources().game.properties.GameEnemiesFinalDropSpeed&&(B=Math.min(a,SI.res.ResourceLoader.getResources().game.properties.GameEnemiesFinalDropSpeed));a=z-SI.res.ResourceLoader.getResources().game.properties.GameSpawnEnemiesDeltaDifference;a<SI.res.ResourceLoader.getResources().game.properties.GameSpawnEnemiesFinalDelta&&(a=SI.res.ResourceLoader.getResources().game.properties.GameSpawnEnemiesFinalDelta);z=a}function w(){SI.game.Scenery.startExplosions();SI.vibrate(SI.res.ResourceLoader.getResources().game.properties.GameExplosionsVibrationTime)}
var r=this,v=!1,x=0,z=0,y=0,B=0,G=0,D=0,A=0,E=!1,H=!1,F=!1,C=!1;r.isDisplayed=function(){return v};r.getSpawnY=function(){return x};r.getSpawnEnemiesMaxDelta=function(){return z};r.getSpawnEnemiesDelta=function(){return y};r.getEnemiesDropSpeed=function(){return B};r.getPauseMessageX=function(){return G};r.getPauseMessageY=function(){return D};r.getMoveDelta=function(){return A};r.isMovingUp=function(){return E};r.isMovingDown=function(){return H};r.isMovingLeft=function(){return F};r.isMovingRight=
function(){return C};r.init=function(){x=2*-SI.game.target.Enemy.getSpritesSheetsAverageSize();var a=SI.game.Renderer.getScene().getContext().font;SI.game.Renderer.getScene().getContext().font=SI.res.ResourceLoader.getResources().game.properties.GamePauseMessageFont;var b=SI.game.Renderer.getScene().getContext().measureText(SI.res.ResourceLoader.getResources().game.properties.GamePauseMessageText).width,c=parseInt(SI.res.ResourceLoader.getResources().game.properties.GamePauseMessageFont);G=SI.game.Renderer.getScene().getCenterXCoord(b);
D=SI.game.Renderer.getScene().getCenterYCoord(c);SI.game.Renderer.getScene().getContext().font=a};r.display=function(){v||(v=!0,a(),SI.game.Scenery.setControlsListeners(),SI.game.target.Parachute.setControlsListeners(),SI.game.target.Enemy.setControlsListeners(),SI.Animation.setControlsListeners(),SI.game.HUD.setControlsListeners(),SI.Controls.setKeyDownAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveUpKeyCode1,f),SI.Controls.setKeyDownAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveUpKeyCode2,
f),SI.Controls.setKeyDownAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveDownKeyCode1,c),SI.Controls.setKeyDownAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveDownKeyCode2,c),SI.Controls.setKeyDownAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveLeftKeyCode1,n),SI.Controls.setKeyDownAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveLeftKeyCode2,n),SI.Controls.setKeyDownAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveRightKeyCode1,
p),SI.Controls.setKeyDownAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveRightKeyCode2,p),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GamePauseKeyCode,e),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveUpKeyCode1,m),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveUpKeyCode2,m),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveDownKeyCode1,
g),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveDownKeyCode2,g),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveLeftKeyCode1,q),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveLeftKeyCode2,q),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveRightKeyCode1,h),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveRightKeyCode2,
h),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameShootKeyCode1,l),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameShootKeyCode2,l),SI.game.Scenery.setDestructionListener(b),SI.game.target.Enemy.setGroundReachedListener(k),SI.game.target.Enemy.setHitListener(u),SI.game.HUD.setEmptyLifeListener(w),SI.Renderer.render(),d())};r.close=function(){v&&(v=!1,a(),SI.game.Scenery.unsetControlsListeners(),SI.game.target.Parachute.unsetControlsListeners(),
SI.game.target.Enemy.unsetControlsListeners(),SI.Animation.unsetControlsListeners(),SI.game.HUD.unsetControlsListeners(),SI.Controls.setKeyDownAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveUpKeyCode1,null),SI.Controls.setKeyDownAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveUpKeyCode2,null),SI.Controls.setKeyDownAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveDownKeyCode1,null),SI.Controls.setKeyDownAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveDownKeyCode2,
null),SI.Controls.setKeyDownAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveLeftKeyCode1,null),SI.Controls.setKeyDownAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveLeftKeyCode2,null),SI.Controls.setKeyDownAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveRightKeyCode1,null),SI.Controls.setKeyDownAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveRightKeyCode2,null),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GamePauseKeyCode,
null),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveUpKeyCode1,null),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveUpKeyCode2,null),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveDownKeyCode1,null),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveDownKeyCode2,null),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveLeftKeyCode1,
null),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveLeftKeyCode2,null),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveRightKeyCode1,null),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameMoveRightKeyCode2,null),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameShootKeyCode1,null),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.GameShootKeyCode2,
null))};r.renderLogic=function(){SI.game.Scenery.renderLogic();SI.game.target.Parachute.renderLogic();SI.game.target.Enemy.renderLogic();SI.Animation.renderLogic();SI.game.HUD.renderLogic();y++;y>=z&&(y=0,SI.game.Scenery.isExploding()||d());A++;A>=SI.res.ResourceLoader.getResources().game.properties.GameMoveMaxDelta&&(A=0,E&&SI.Controls.setMouseY(SI.Controls.getMouseY()-SI.res.ResourceLoader.getResources().game.properties.GameMoveSpeed),H&&SI.Controls.setMouseY(SI.Controls.getMouseY()+SI.res.ResourceLoader.getResources().game.properties.GameMoveSpeed),
F&&SI.Controls.setMouseX(SI.Controls.getMouseX()-SI.res.ResourceLoader.getResources().game.properties.GameMoveSpeed),C&&SI.Controls.setMouseX(SI.Controls.getMouseX()+SI.res.ResourceLoader.getResources().game.properties.GameMoveSpeed))};r.renderGraphics=function(){SI.Renderer.clearFrame(SI.game.Renderer.getScene().getContext(),SI.game.Renderer.getScene().getCanvas());SI.game.Scenery.renderGraphics();SI.game.target.Parachute.renderGraphics();SI.game.target.Enemy.renderGraphics();SI.Animation.renderGraphics();
SI.game.HUD.renderGraphics()}};
SI.game.ui.IntroMessage=new function(){var a=this,d=!1,b=null,e=0,f=0,c=0,n=0,p=0,m=0;a.isDisplayed=function(){return d};a.getMessageX=function(){return e};a.getMessageY=function(){return f};a.getMessageOpacity=function(){return c};a.getMessageProgression=function(){return n};a.getMessageDelta=function(){return p};a.getMessageFadeOutDelta=function(){return m};a.setCursorSpriteSheet=function(a){b=a};a.init=function(b){a.setCursorSpriteSheet(b);b=SI.game.Renderer.getScene().getContext().font;SI.game.Renderer.getScene().getContext().font=
SI.res.ResourceLoader.getResources().game.properties.IntroMessageFont;var c=parseInt(SI.res.ResourceLoader.getResources().game.properties.IntroMessageFont),h=SI.game.Renderer.getScene().getContext().measureText(SI.res.ResourceLoader.getResources().game.properties.IntroMessageText).width;e=SI.game.Renderer.getScene().getCenterXCoord(h);f=SI.game.Renderer.getScene().getCenterYCoord(c);SI.game.Renderer.getScene().getContext().font=b};a.display=function(){d||(d=!0,c=0,n=1,p=0,c=.01,n=1)};a.close=function(){d&&
(d=!1,c=0,n=1,p=0)};a.renderLogic=function(){p++;if(p>=SI.res.ResourceLoader.getResources().game.properties.IntroMessageMaxDelta&&(p=0,0!=c&&1!=c)){var b=c+SI.res.ResourceLoader.getResources().game.properties.IntroMessageOpacitySpeed*n;1<b?b=1:0>b&&(b=0);c=b;0==b&&(a.close(),SI.game.ui.StartScreen.display())}m++;m>=SI.res.ResourceLoader.getResources().game.properties.IntroMessageFadeOutMaxDelta&&(m=0,c=.99,n=-1)};a.renderGraphics=function(){var a=SI.game.Renderer.getScene().getContext().fillStyle;
SI.game.Renderer.getScene().getContext().fillStyle=SI.res.ResourceLoader.getResources().game.properties.IntroMessageBackgroundColor;SI.game.Renderer.getScene().getContext().fillRect(0,0,SI.game.Renderer.getScene().getCanvas().width,SI.game.Renderer.getScene().getCanvas().height);SI.game.Renderer.getScene().getContext().fillStyle=a;var a=SI.game.Renderer.getScene().getContext().globalAlpha,d=SI.game.Renderer.getScene().getContext().font,h=SI.game.Renderer.getScene().getContext().fillStyle;SI.game.Renderer.getScene().getContext().globalAlpha=
c;SI.game.Renderer.getScene().getContext().font=SI.res.ResourceLoader.getResources().game.properties.IntroMessageFont;SI.game.Renderer.getScene().getContext().fillStyle=SI.res.ResourceLoader.getResources().game.properties.IntroMessageColor;SI.game.Renderer.getScene().getContext().fillText(SI.res.ResourceLoader.getResources().game.properties.IntroMessageText,e,f);SI.game.Renderer.getScene().getContext().globalAlpha=a;SI.game.Renderer.getScene().getContext().font=d;SI.game.Renderer.getScene().getContext().fillStyle=
h;SI.game.Renderer.getScene().getContext().drawImage(b,SI.game.Renderer.getScene().getMouseX(),SI.game.Renderer.getScene().getMouseY())}};
SI.game.ui.StartScreen=new function(){function a(){m=SI.res.ResourceLoader.getResources().game.properties.StartScreenLogoStartProportion;g=1;t=k=l=h=q=0;v=!1;x=0;SI.game.Scenery.resetState()}function d(){1==m&&-1==g&&(b.close(),SI.game.ui.Game.display())}var b=this,e=!1,f=null,c=null,n=null,p=0,m=0,g=0,q=0,h=0,l=0,k=0,u=0,t=0,w=0,r=0,v=!1,x=0,z=0,y=0;b.isDisplayed=function(){return e};b.getCopyrightX=function(){return p};b.getLogoProportion=function(){return m};b.getLogoCurrentX=function(){return q};
b.getLogoCurrentY=function(){return h};b.getLogoCurrentWidth=function(){return l};b.getLogoCurrentHeight=function(){return k};b.getLogoEndWidth=function(){return u};b.getLogoResizeDelta=function(){return t};b.getStartMessageX=function(){return w};b.getStartMessageY=function(){return r};b.startMessageDisplayed=function(){return v};b.getStartMessageDelta=function(){return x};b.getEsrbRatingX=function(){return z};b.getEsrbRatingY=function(){return y};b.setLogoSpriteSheet=function(a){f=a};b.setEsrbRatingSpriteSheet=
function(a){c=a;z=SI.game.Renderer.getScene().getCanvas().width-c.width-SI.res.ResourceLoader.getResources().game.properties.StartScreenEsrbRatingMarginRight;y=SI.game.Renderer.getScene().getCanvas().height-c.height-SI.res.ResourceLoader.getResources().game.properties.StartScreenEsrbRatingMarginBottom};b.setCursorSpriteSheet=function(a){n=a};b.init=function(a,c,k){b.setLogoSpriteSheet(a);b.setEsrbRatingSpriteSheet(c);b.setCursorSpriteSheet(k);a=SI.game.Renderer.getScene().getContext().font;SI.game.Renderer.getScene().getContext().font=
SI.res.ResourceLoader.getResources().game.properties.StartScreenCopyrightFont;c=SI.game.Renderer.getScene().getContext().measureText(SI.res.ResourceLoader.getResources().game.properties.StartScreenCopyrightText).width;p=SI.game.Renderer.getScene().getCenterXCoord(c);SI.game.Renderer.getScene().getContext().font=a;u=SI.game.Renderer.getScene().getCanvas().width+SI.res.ResourceLoader.getResources().game.properties.StartScreenLogoEndWidthOffset;a=SI.game.Renderer.getScene().getContext().font;SI.game.Renderer.getScene().getContext().font=
SI.res.ResourceLoader.getResources().game.properties.StartScreenStartMessageFont;c=SI.game.Renderer.getScene().getContext().measureText(SI.res.ResourceLoader.getResources().game.properties.StartScreenStartMessageText).width;w=SI.game.Renderer.getScene().getCenterXCoord(c);r=SI.game.Renderer.getScene().getCanvas().height-SI.res.ResourceLoader.getResources().game.properties.StartScreenStartMessageMarginBottom;SI.game.Renderer.getScene().getContext().font=a};b.display=function(){e||(e=!0,a(),SI.game.Scenery.setControlsListeners(),
SI.Controls.addClickListener(d),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.StartScreenStartGameKeyCode1,d),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.StartScreenStartGameKeyCode2,d))};b.close=function(){e&&(e=!1,a(),SI.game.Scenery.unsetControlsListeners(),SI.Controls.removeClickListener(d),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.StartScreenStartGameKeyCode1,null),SI.Controls.setKeyUpAction(SI.res.ResourceLoader.getResources().game.properties.StartScreenStartGameKeyCode2,
null))};b.renderLogic=function(){SI.game.Scenery.renderLogic();t++;t>=SI.res.ResourceLoader.getResources().game.properties.StartScreenLogoResizeMaxDelta&&(t=0,1!=m||-1!=g)&&(m+=SI.res.ResourceLoader.getResources().game.properties.StartScreenLogoProportionDiff*g,1==g?l>u&&(g=-1):1>m&&(m=1),l=f.width*m,k=f.height*m,q=SI.game.Renderer.getScene().getCenterXCoord(l),h=SI.game.Renderer.getScene().getCenterYCoord(k));x++;x>=SI.res.ResourceLoader.getResources().game.properties.StartScreenStartMessageMaxDelta&&
(x=0,1==m&&-1==g&&(v=!v))};b.renderGraphics=function(){SI.game.Scenery.renderGraphics();var a=SI.game.Renderer.getScene().getContext().font,b=SI.game.Renderer.getScene().getContext().fillStyle;SI.game.Renderer.getScene().getContext().font=SI.res.ResourceLoader.getResources().game.properties.StartScreenCopyrightFont;SI.game.Renderer.getScene().getContext().fillStyle=SI.res.ResourceLoader.getResources().game.properties.StartScreenCopyrightColor;SI.game.Renderer.getScene().getContext().fillText(SI.res.ResourceLoader.getResources().game.properties.StartScreenCopyrightText,
p,SI.res.ResourceLoader.getResources().game.properties.StartScreenCopyrightMarginTop);SI.game.Renderer.getScene().getContext().font=a;SI.game.Renderer.getScene().getContext().fillStyle=b;SI.game.Renderer.getScene().getContext().drawImage(f,0,0,f.width,f.height,q,h,l,k);SI.game.Renderer.getScene().getContext().drawImage(c,z,y);1==m&&-1==g&&v&&(a=SI.game.Renderer.getScene().getContext().font,b=SI.game.Renderer.getScene().getContext().fillStyle,SI.game.Renderer.getScene().getContext().font=SI.res.ResourceLoader.getResources().game.properties.StartScreenStartMessageFont,
SI.game.Renderer.getScene().getContext().fillStyle=SI.res.ResourceLoader.getResources().game.properties.StartScreenStartMessageColor,SI.game.Renderer.getScene().getContext().fillText(SI.res.ResourceLoader.getResources().game.properties.StartScreenStartMessageText,w,r),SI.game.Renderer.getScene().getContext().font=a,SI.game.Renderer.getScene().getContext().fillStyle=b);SI.game.Renderer.getScene().getContext().drawImage(n,SI.game.Renderer.getScene().getMouseX(),SI.game.Renderer.getScene().getMouseY())}};
SI.Gamepad=new function(){function a(a){n=a.gamepad.index;b()}function d(a){n=null;p=[]}function b(){if(e.isConnected()){var a=navigator.getGamepads()[n],b=a.buttons.length,c;for(c=0;c<b;c++)p[c]={pressed:a.buttons[c].pressed,value:a.buttons[c].value}}}var e=this,f=null,c=30,n=null,p=[],m=null,g=null,q=null;e.getTrackTimer=function(){return f};e.getTrackTime=function(){return c};e.getIndex=function(){return n};e.isSupported=function(){return"function"==typeof navigator.getGamepads};e.isConnected=
function(){return null!=n};e.noButtonsLastState=function(){return 0==p.length};e.setTrackTime=function(a){c=a};e.setButtonDownListener=function(a){m=a};e.setButtonUpListener=function(a){g=a};e.setAxisUpdateListener=function(a){q=a};e.enable=function(){e.isSupported()&&(f=setInterval(SI.Gamepad.track,c),window.addEventListener("gamepadconnected",a,!1),window.addEventListener("gamepaddisconnected",d,!1))};e.disable=function(){e.isSupported()&&(clearInterval(f),window.removeEventListener("gamepadconnected",
a,!1),window.removeEventListener("gamepaddisconnected",d,!1))};e.isButtonPressed=function(a){return"object"==typeof a?a.pressed:1==a};e.track=function(){if(e.isConnected()&&!e.noButtonsLastState()){var a=navigator.getGamepads()[n],c=a.axes.length,k;for(k=0;k<c;k++)"function"==typeof q&&q(k,a.axes[k]);var a=navigator.getGamepads()[n],c=a.buttons.length,d;for(k=0;k<c;k++)d=e.isButtonPressed(a.buttons[k]),d!=e.isButtonPressed(p[k])&&(d?"function"==typeof m&&m(k):"function"==typeof g&&g(k));b()}}};
SI.Renderer=new function(){function a(){"function"==typeof g&&g();SI.res.includeScript("../res/js/lib/jquery/2.1.3/jquery.min.js",function(){SI.res.includeScript("lib/jquery-html5-fullscreen-master/src/jquery.fullscreen.js",function(){SI.res.ResourceLoader.setSingleErrorDetectionListener(q);SI.res.ResourceLoader.loadFromResourceList(d,h)},q)},q)}function d(){f.setFps(SI.res.ResourceLoader.getResources().properties.RendererFPS);f.setSingleUpdateLoop(SI.res.ResourceLoader.getResources().properties.RendererSingleUpdateLoop);
"function"==typeof l&&l()}function b(){"function"==typeof k&&k()}function e(){c&&(m&&b(),"function"==typeof u&&u(),0<n?setTimeout(function(){requestAnimationFrame(e)},n):requestAnimationFrame(e))}var f=this;f.NO_FRAME_LOCK=0;var c=!1,n=0,p=null,m=!1,g=null,q=null,h=null,l=null,k=null,u=null;f.isRendering=function(){return c};f.getFpsTime=function(){return n};f.getSingleUpdateLoop=function(){return m};f.setFps=function(a){n=0<a?Math.round(1E3/a):0};f.setSingleUpdateLoop=function(a){m=a;c&&(clearInterval(p),
m||(p=setInterval(b,SI.res.ResourceLoader.getResources().properties.RendererLogicRenderTime)))};f.setBeforeLoadListener=function(a){g=a};f.setLoadErrorListener=function(a){q=a};f.setResourceLoadErrorListener=function(a){h=a};f.setPrepareListener=function(a){l=a};f.setLogicRenderListener=function(a){k=a};f.setGraphicsRenderListener=function(a){u=a};f.render=function(){c||(c=!0,p=m?null:setInterval(b,SI.res.ResourceLoader.getResources().properties.RendererLogicRenderTime),e())};f.stopRendering=function(){c&&
(clearInterval(p),c=!1)};f.clearFrame=function(a,b){a.clearRect(0,0,b.width,b.height)};window.addEventListener("load",function(b){SI.defineRequestAnimationFrame();SI.defineVibrate();a()},!1)};SI.res={};SI.res.cursors={};SI.res.fonts={};SI.res.fonts.pixellife={};SI.res.game={};SI.res.images={};SI.res.images.hud={};SI.res.images.scenery={};SI.res.images.scenery.cloud={};SI.res.images.target={};SI.res.images.target.enemy={};SI.res.images.ui={};SI.res.images.ui.StartScreen={};
SI.res.includeScript=function(a,d,b){var e=document.createElement("script");e.type="text/javascript";e.src=a;document.head.insertBefore(e,document.head.firstChild);e.addEventListener("load",function(a){"function"==typeof d&&d()},!1);e.addEventListener("error",function(a){"function"==typeof b&&b()},!1)};
SI.res.ResourceLoader=new function(){function a(b,c,e){var f,r,p;for(p in b)f=b[p],r=typeof f,"object"==r||"array"==r?a(f,c,e):d(f,p,function(a,d,e){a?b[d]=e:delete b[d];g++;g>=m&&(n=!1,"function"==typeof c&&c())},function(){n=!1;h||(h=!0,"function"==typeof l&&l());"function"==typeof e&&e()})}function d(a,d,l,g){var h=c.checkResourceExtension(a);"json"==h?b(a,d,l,g):"png"==h||"jpg"==h||"jpeg"==h?e(a,d,l,g):"ogg"==h||"mp3"==h?f(a,d,h,l,g):l(!1,d,null)}function b(a,b,c,d){$.getJSON(a+"?time="+$.now(),
function(a){c(!0,b,a)}).fail(function(){d()})}function e(a,b,c,d){var e=new Image;e.addEventListener("load",function(a){c(!0,b,e)},!1);e.addEventListener("error",function(a){d()},!1);q||(a+="?time="+$.now());e.src=a}function f(a,b,d,e,l){if(d!=c.AUDIO_EXTENSION_TO_USE)e(!1,b,null);else{var f=new Audio;f.addEventListener("loadeddata",function(a){e(!0,b,f)},!1);f.addEventListener("error",function(a){l()},!1);q||(a+="?time="+$.now());f.src=a;f.load()}}var c=this;c.RESOURCE_LIST_URL="res/resourceList.json";
c.AUDIO_EXTENSION_TO_USE="";var n=!1,p=null,m=0,g=0,q=!0,h=!1,l=null;c.isLoading=function(){return n};c.getResources=function(){return p};c.getResourcesCount=function(){return m};c.getLoadCache=function(){return q};c.getResourcesLoadCount=function(){return g};c.getProgress=function(){return 0==m?0:Math.round(100*g/m)};c.getAudioExtensionToUse=function(){return"maybe"==document.createElement("audio").canPlayType("audio/ogg")?"ogg":"mp3"};c.setLoadCache=function(a){q=a};c.setSingleErrorDetectionListener=
function(a){l=a};c.loadFromResourceList=function(b,d){n=!0;$.getJSON(c.RESOURCE_LIST_URL,function(e){m=c.countResourcesFromNode(e);g=0;h=!1;a(e,b,d);p=e}).fail(function(){n=!1;"function"==typeof l&&l();"function"==typeof d&&d()})};c.countResourcesFromNode=function(a){var b=0,d,e,f;for(f in a)d=a[f],e=typeof d,"object"==e||"array"==e?b+=c.countResourcesFromNode(d):b++;return b};c.checkResourceExtension=function(a){a=a.split(".");return 0==a.length?"":a[a.length-1].toLowerCase()};c.AUDIO_EXTENSION_TO_USE=
c.getAudioExtensionToUse()};SI.safeObjectArrayLoop=function(a,d){var b="function"==typeof d,e;for(e=0;e<a.length&&("undefined"==typeof a[e]||!b||d(e,a[e]));e++);};SI.safeObjectArrayReverseLoop=function(a,d){var b="function"==typeof d,e;for(e=a.length;0<=e&&("undefined"==typeof a[e]||!b||d(e,a[e]));e--);};
SI.Scene=new function(){function a(){null==b&&(b=new $.fullscreen($(document.body)))}var d=this,b=null;d["class"]=function(){var a="",b="",c="",d="",p="",m=0,g=0,q=null,h=null;this.getIconUrl=function(){return a};this.getCursorUrl=function(){return b};this.getTitle-function(){return c};this.getBackgroundColor=function(){return d};this.getCanvasBackgroundColor=function(){return p};this.getWidth=function(){return m};this.getHeight=function(){return g};this.getCanvas=function(){return q};this.getContext=
function(){return h};this.setIconUrl=function(b){a=b};this.setCursorUrl=function(a){b=a};this.setTitle=function(a){c=a};this.setBackgroundColor=function(a){d=a};this.setCanvasBackgroundColor=function(a){p=a};this.setWidth=function(a){m=a};this.setHeight=function(a){g=a};this.adjustSizeToScreen=function(a){m=a*(Math.floor(screen.width/a)-SI.res.ResourceLoader.getResources().game.properties.SceneCanvasXMarginProportion);g=a*(Math.floor(screen.height/a)-SI.res.ResourceLoader.getResources().game.properties.SceneCanvasYMarginProportion)};
this.fillSizeToScreen=function(){m=screen.width;g=screen.height};this.getCenterXCoord=function(a){return(m-a)/2};this.getCenterYCoord=function(a){return(g-a)/2};this.getMouseX=function(){return SI.Controls.getMouseX()-q.offsetLeft};this.getMouseY=function(){return SI.Controls.getMouseY()-q.offsetTop};this.buildInDOM=function(){if(""!=a){var l=document.createElement("link");l.rel="shortcut icon";l.href=a;document.head.appendChild(l)}""!=b&&(document.body.style.cursor="url("+b+"), auto");document.title=
c;document.body.parentElement.style.width="100%";document.body.parentElement.style.height="100%";document.body.parentElement.style.overflow="hidden";document.body.style.width="100%";document.body.style.height="100%";document.body.style.margin="0";document.body.style.backgroundColor=d;document.body.style.overflow="hidden";l=document.createElement("table");l.border="0";l.cellpadding="0";l.cellspacing="0";l.style.width="100%";l.style.height="100%";l.style.backgroundColor=d;l.style.textAlign="center";
l.appendChild(document.createElement("tr"));l.firstChild.appendChild(document.createElement("td"));q=document.createElement("canvas");q.width=m;q.height=g;q.style.backgroundColor=p;h=q.getContext("2d");l.firstChild.firstChild.appendChild(q);document.body.removeChild(document.body.firstChild);document.body.appendChild(l)}};d.create=function(){return new d["class"]};d.setFullScreenMode=function(){a();b.enableFullScreen()};d.unSetFullScreenMode=function(){a();b.disableFullScreen()};d.setFullScreenOnFirstEvent=
function(){SI.res.ResourceLoader.getResources().game.properties.SceneFullScreenOnFirstEvent&&!SI.Controls.wasFirstEventPerformed()&&d.setFullScreenMode()};d.loadFont=function(a,b,c){var d=document.createElement("style");d.type="text/css";d.appendChild(document.createTextNode("@font-face { \n\r  font-family : '"+a+"'; \n\r  src : url('"+b+"font.eot'); \n\r  src : url('"+b+"font.eot?#iefix') format('embedded-opentype'), \n\r    url('"+b+"font.woff') format('woff'), \n\r    url('"+b+"font.ttf') format('truetype'), \n\r    url('"+
b+"font.svg#"+c+"') format('svg') \n\r}"));document.head.appendChild(d)}};SI.vibrate=function(a){"function"!=typeof navigator.vibrate||"number"==typeof a&&0>=a||navigator.vibrate(a)};